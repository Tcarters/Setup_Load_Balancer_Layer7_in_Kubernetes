<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_59n2fda6yvhp-3{list-style-type:none}.lst-kix_59n2fda6yvhp-6>li:before{content:"\0025cf  "}ul.lst-kix_59n2fda6yvhp-4{list-style-type:none}ul.lst-kix_59n2fda6yvhp-1{list-style-type:none}ul.lst-kix_59n2fda6yvhp-2{list-style-type:none}.lst-kix_59n2fda6yvhp-4>li:before{content:"\0025cb  "}ul.lst-kix_59n2fda6yvhp-7{list-style-type:none}.lst-kix_59n2fda6yvhp-8>li:before{content:"\0025a0  "}ul.lst-kix_59n2fda6yvhp-8{list-style-type:none}.lst-kix_59n2fda6yvhp-5>li:before{content:"\0025a0  "}ul.lst-kix_59n2fda6yvhp-5{list-style-type:none}ul.lst-kix_59n2fda6yvhp-6{list-style-type:none}.lst-kix_59n2fda6yvhp-7>li:before{content:"\0025cb  "}.lst-kix_59n2fda6yvhp-0>li:before{content:"\0025cf  "}.lst-kix_59n2fda6yvhp-1>li:before{content:"\0025cb  "}.lst-kix_59n2fda6yvhp-2>li:before{content:"\0025a0  "}.lst-kix_59n2fda6yvhp-3>li:before{content:"\0025cf  "}.lst-kix_ejerxy28cfzu-8>li:before{content:"\0025a0  "}.lst-kix_ejerxy28cfzu-7>li:before{content:"\0025cb  "}.lst-kix_ejerxy28cfzu-6>li:before{content:"\0025cf  "}ul.lst-kix_mvep9sap8u2r-8{list-style-type:none}ul.lst-kix_mvep9sap8u2r-7{list-style-type:none}ul.lst-kix_59n2fda6yvhp-0{list-style-type:none}.lst-kix_xixxogiq9tpr-1>li:before{content:"\0025cb  "}.lst-kix_fbwrohojxdnd-2>li:before{content:"\0025a0  "}ul.lst-kix_i0fon0f6du5z-0{list-style-type:none}.lst-kix_fbwrohojxdnd-1>li:before{content:"\0025cb  "}.lst-kix_fbwrohojxdnd-3>li:before{content:"\0025cf  "}.lst-kix_fbwrohojxdnd-0>li:before{content:"\0025cf  "}.lst-kix_fbwrohojxdnd-4>li:before{content:"\0025cb  "}.lst-kix_xixxogiq9tpr-2>li:before{content:"\0025a0  "}.lst-kix_xixxogiq9tpr-3>li:before{content:"\0025cf  "}ul.lst-kix_i0fon0f6du5z-6{list-style-type:none}.lst-kix_fbwrohojxdnd-6>li:before{content:"\0025cf  "}ul.lst-kix_xixxogiq9tpr-0{list-style-type:none}.lst-kix_xixxogiq9tpr-4>li:before{content:"\0025cb  "}ul.lst-kix_i0fon0f6du5z-5{list-style-type:none}ul.lst-kix_i0fon0f6du5z-8{list-style-type:none}.lst-kix_fbwrohojxdnd-5>li:before{content:"\0025a0  "}.lst-kix_fbwrohojxdnd-7>li:before{content:"\0025cb  "}ul.lst-kix_xixxogiq9tpr-2{list-style-type:none}ul.lst-kix_i0fon0f6du5z-7{list-style-type:none}ul.lst-kix_xixxogiq9tpr-1{list-style-type:none}ul.lst-kix_i0fon0f6du5z-2{list-style-type:none}ul.lst-kix_i0fon0f6du5z-1{list-style-type:none}ul.lst-kix_i0fon0f6du5z-4{list-style-type:none}.lst-kix_xixxogiq9tpr-5>li:before{content:"\0025a0  "}ul.lst-kix_i0fon0f6du5z-3{list-style-type:none}.lst-kix_xixxogiq9tpr-8>li:before{content:"\0025a0  "}ul.lst-kix_xixxogiq9tpr-8{list-style-type:none}ul.lst-kix_xixxogiq9tpr-7{list-style-type:none}.lst-kix_fbwrohojxdnd-8>li:before{content:"\0025a0  "}ul.lst-kix_xixxogiq9tpr-4{list-style-type:none}.lst-kix_xixxogiq9tpr-6>li:before{content:"\0025cf  "}ul.lst-kix_xixxogiq9tpr-3{list-style-type:none}ul.lst-kix_xixxogiq9tpr-6{list-style-type:none}.lst-kix_xixxogiq9tpr-7>li:before{content:"\0025cb  "}ul.lst-kix_xixxogiq9tpr-5{list-style-type:none}.lst-kix_mvep9sap8u2r-4>li:before{content:"\0025cb  "}.lst-kix_mvep9sap8u2r-2>li:before{content:"\0025a0  "}.lst-kix_mvep9sap8u2r-3>li:before{content:"\0025cf  "}.lst-kix_mvep9sap8u2r-0>li:before{content:"\0025cf  "}.lst-kix_mvep9sap8u2r-1>li:before{content:"\0025cb  "}ul.lst-kix_ejerxy28cfzu-0{list-style-type:none}ul.lst-kix_ejerxy28cfzu-1{list-style-type:none}ul.lst-kix_ejerxy28cfzu-4{list-style-type:none}ul.lst-kix_ejerxy28cfzu-5{list-style-type:none}ul.lst-kix_ejerxy28cfzu-2{list-style-type:none}ul.lst-kix_ejerxy28cfzu-3{list-style-type:none}ul.lst-kix_ejerxy28cfzu-8{list-style-type:none}ul.lst-kix_ejerxy28cfzu-6{list-style-type:none}.lst-kix_mvep9sap8u2r-5>li:before{content:"\0025a0  "}ul.lst-kix_ejerxy28cfzu-7{list-style-type:none}.lst-kix_mvep9sap8u2r-6>li:before{content:"\0025cf  "}.lst-kix_mvep9sap8u2r-7>li:before{content:"\0025cb  "}.lst-kix_mvep9sap8u2r-8>li:before{content:"\0025a0  "}.lst-kix_i0fon0f6du5z-3>li:before{content:"\0025cf  "}.lst-kix_i0fon0f6du5z-2>li:before{content:"\0025a0  "}.lst-kix_i0fon0f6du5z-4>li:before{content:"\0025cb  "}.lst-kix_i0fon0f6du5z-0>li:before{content:"\0025cf  "}.lst-kix_i0fon0f6du5z-8>li:before{content:"\0025a0  "}.lst-kix_i0fon0f6du5z-1>li:before{content:"\0025cb  "}.lst-kix_i0fon0f6du5z-7>li:before{content:"\0025cb  "}.lst-kix_i0fon0f6du5z-6>li:before{content:"\0025cf  "}.lst-kix_i0fon0f6du5z-5>li:before{content:"\0025a0  "}.lst-kix_xixxogiq9tpr-0>li:before{content:"\0025cf  "}ul.lst-kix_fbwrohojxdnd-0{list-style-type:none}ul.lst-kix_fbwrohojxdnd-1{list-style-type:none}ul.lst-kix_fbwrohojxdnd-2{list-style-type:none}ul.lst-kix_fbwrohojxdnd-3{list-style-type:none}.lst-kix_ejerxy28cfzu-0>li:before{content:"\0025cf  "}ul.lst-kix_mvep9sap8u2r-4{list-style-type:none}ul.lst-kix_mvep9sap8u2r-3{list-style-type:none}ul.lst-kix_mvep9sap8u2r-6{list-style-type:none}ul.lst-kix_mvep9sap8u2r-5{list-style-type:none}ul.lst-kix_mvep9sap8u2r-0{list-style-type:none}ul.lst-kix_mvep9sap8u2r-2{list-style-type:none}ul.lst-kix_mvep9sap8u2r-1{list-style-type:none}.lst-kix_ejerxy28cfzu-4>li:before{content:"\0025cb  "}.lst-kix_ejerxy28cfzu-3>li:before{content:"\0025cf  "}.lst-kix_ejerxy28cfzu-5>li:before{content:"\0025a0  "}ul.lst-kix_fbwrohojxdnd-4{list-style-type:none}ul.lst-kix_fbwrohojxdnd-5{list-style-type:none}ul.lst-kix_fbwrohojxdnd-6{list-style-type:none}.lst-kix_ejerxy28cfzu-1>li:before{content:"\0025cb  "}ul.lst-kix_fbwrohojxdnd-7{list-style-type:none}ul.lst-kix_fbwrohojxdnd-8{list-style-type:none}.lst-kix_ejerxy28cfzu-2>li:before{content:"\0025a0  "}.lst-kix_ku7us2u66bii-2>li:before{content:"\0025a0  "}ul.lst-kix_ku7us2u66bii-4{list-style-type:none}ul.lst-kix_ku7us2u66bii-3{list-style-type:none}ul.lst-kix_ku7us2u66bii-2{list-style-type:none}ul.lst-kix_ku7us2u66bii-1{list-style-type:none}.lst-kix_ku7us2u66bii-0>li:before{content:"\0025cf  "}ul.lst-kix_ku7us2u66bii-0{list-style-type:none}.lst-kix_ku7us2u66bii-4>li:before{content:"\0025cb  "}.lst-kix_ku7us2u66bii-1>li:before{content:"\0025cb  "}ul.lst-kix_ku7us2u66bii-8{list-style-type:none}ul.lst-kix_ku7us2u66bii-7{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_ku7us2u66bii-3>li:before{content:"\0025cf  "}ul.lst-kix_ku7us2u66bii-6{list-style-type:none}ul.lst-kix_ku7us2u66bii-5{list-style-type:none}.lst-kix_ku7us2u66bii-8>li:before{content:"\0025a0  "}.lst-kix_ku7us2u66bii-5>li:before{content:"\0025a0  "}.lst-kix_ku7us2u66bii-6>li:before{content:"\0025cf  "}.lst-kix_ku7us2u66bii-7>li:before{content:"\0025cb  "}ol{margin:0;padding:0}table td,table th{padding:0}.c5{-webkit-text-decoration-skip:none;color:#000000;font-weight:700;text-decoration:underline;vertical-align:baseline;text-decoration-skip-ink:none;font-size:13pt;font-family:"Arial";font-style:normal}.c1{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c27{padding-top:12pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c23{padding-top:18pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c10{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c20{color:#0000ff;font-weight:700;font-size:16pt;font-style:normal}.c14{color:#1c4587;font-weight:700;font-size:11pt;font-style:normal}.c3{font-size:12pt;font-style:italic;color:#1c4587;font-weight:700}.c18{color:#1c4587;font-weight:400;font-size:11pt;font-style:normal}.c7{text-decoration:none;vertical-align:baseline;font-family:"Arial"}.c19{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c17{color:#134f5c;font-weight:400;font-style:italic}.c31{color:#1c4587;font-size:11pt;font-style:italic}.c22{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;text-decoration:underline}.c13{color:inherit;text-decoration:inherit}.c8{margin-left:36pt;padding-left:0pt}.c28{color:#000000;font-style:normal}.c11{padding:0;margin:0}.c12{border:1px solid black;margin:5px}.c6{font-size:12pt;font-weight:700}.c21{color:#1155cc;font-style:italic}.c26{color:#073763;font-style:italic}.c29{font-size:13pt;font-weight:700}.c9{color:#1155cc;font-size:12pt}.c30{font-weight:700}.c15{font-size:12pt}.c24{height:11pt}.c32{background-color:#00ffff}.c16{margin-left:36pt}.c25{color:#1155cc}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c19"><p class="c2"><span class="c20 c7">SETUP AN APPLICATION LOAD BALANCER &nbsp;LAYER 7 &nbsp;IN KUBERNETES</span></p><p class="c1"><span class="c7 c20"></span></p><p class="c1"><span class="c0"></span></p><h2 class="c23" id="h.13hxmq1bhk8e"><span class="c5">What is Ingress?</span></h2><p class="c27"><span class="c22 c25"><a class="c13" href="https://www.google.com/url?q=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.20/%23ingress-v1-networking-k8s-io&amp;sa=D&amp;source=editors&amp;ust=1614864273529000&amp;usg=AOvVaw2UCIadFxoiypTfhd5YqS--">Ingress</a></span><span>&nbsp;exposes HTTP and HTTPS routes from outside the cluster to</span><span><a class="c13" href="https://www.google.com/url?q=https://kubernetes.io/docs/concepts/services-networking/service/&amp;sa=D&amp;source=editors&amp;ust=1614864273529000&amp;usg=AOvVaw1ljQ5ny-u1wSdEMZXcNaYJ">&nbsp;</a></span><span class="c22 c25"><a class="c13" href="https://www.google.com/url?q=https://kubernetes.io/docs/concepts/services-networking/service/&amp;sa=D&amp;source=editors&amp;ust=1614864273530000&amp;usg=AOvVaw3dLdNJQwX6urn8XVdSeimd">services</a></span><span class="c0">&nbsp;within the cluster. Traffic routing is controlled by rules defined on the Ingress resource.</span></p><p class="c27"><span class="c0">Here is a simple example where an Ingress sends all its traffic to one Service:</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 166.67px;"><img alt="" src="images/image18.png" style="width: 601.70px; height: 166.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c5">What is Our goal?</span></p><p class="c1"><span class="c5"></span></p><p class="c2"><span class="c4">In this scenario we will launch an application Load Balancer layer 7 meaning an ingress rules controlled by ingress Controller and managing two different deployments which contains at least two copies of pods.</span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c5">Steps:</span></p><p class="c1"><span class="c5"></span></p><p class="c2"><span class="c4">So Now follow below to start setup our ingress:</span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c6">Step 1)</span><span class="c4">&nbsp;Start your cluster and in my case i will use minikube provided by kubernetes</span></p><p class="c2"><span class="c15">&nbsp;By using : </span><span class="c7 c15 c17">minikube start</span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 137.33px;"><img alt="" src="images/image9.png" style="width: 601.70px; height: 137.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c4">To confirm you will see it has been launched in my virtualBox environment:</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 547.50px; height: 411.08px;"><img alt="" src="images/image11.png" style="width: 547.50px; height: 411.08px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c30">Step 2) </span><span>&nbsp;</span><span class="c4">Enable ingress addons on minikube to allows us to launch the ingress configuration:</span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c15">The command to do it is : &nbsp;&ldquo;</span><span class="c7 c6 c21">minikube addons enable ingress&rdquo;</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 53.33px;"><img alt="" src="images/image7.png" style="width: 601.70px; height: 53.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c15">After you can check the pods of ingress running in your kube-system namespace of your cluster by:</span><span>&nbsp; </span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 2.67px solid #00ffff; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 181.33px;"><img alt="" src="images/image3.png" style="width: 601.70px; height: 181.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><sup><a href="#cmnt1" id="cmnt_ref1">[a]</a></sup></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c4">You can see the ingress controller pod launched successfully this means now we can start deploying &nbsp;our rules for ingress..</span></p><p class="c1"><span class="c4"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c15">Till now you can see below that we don&rsquo;t yet have an ingress rule set up </span><span class="c0">&nbsp;</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 558.00px; height: 71.92px;"><img alt="" src="images/image10.png" style="width: 558.00px; height: 71.92px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c6">Step 3) </span><span class="c4">To achieve this we have to set up an ingress controller to manage our ingress load so my plan was to use Ngnix ingress controller in k8s as it has more features and an easily understanding setup .</span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c15">For more understanding follow =&gt; </span><span class="c9 c22"><a class="c13" href="https://www.google.com/url?q=https://www.nginx.com/products/nginx-ingress-controller/&amp;sa=D&amp;source=editors&amp;ust=1614864273533000&amp;usg=AOvVaw1bvQ4YS-i4bktNaBiFskqd">https://www.nginx.com/products/nginx-ingress-controller/</a></span></p><p class="c1"><span class="c4"></span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c4">And I will launch 2 pods containing different pods containing &nbsp;my docker image inside for demonstration of load balancer request.</span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c4">So as we know that to launch pods in k8s we use a base image or registry image, so i create 2 images one for searchapp and another for mailapp. </span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c4">Below is the link for the docker image from which i will launch my pods:</span></p><p class="c2"><span class="c22 c9"><a class="c13" href="https://www.google.com/url?q=https://hub.docker.com/repository/docker/tcdocker2021/searchapp&amp;sa=D&amp;source=editors&amp;ust=1614864273534000&amp;usg=AOvVaw1K7ifoQ8WLtu1qcac8tqwh">Searchapp_docker_image</a></span><span class="c15">&nbsp; &amp;&amp; </span><span class="c22 c9"><a class="c13" href="https://www.google.com/url?q=https://hub.docker.com/repository/docker/tcdocker2021/mailapp&amp;sa=D&amp;source=editors&amp;ust=1614864273535000&amp;usg=AOvVaw3WckSaiXT4nB3ULfZtT7ju">Mailapp_docker_image</a></span></p><p class="c1"><span class="c4"></span></p><p class="c1"><span class="c4"></span></p><p class="c1"><span class="c7 c28 c6"></span></p><p class="c1"><span class="c7 c6 c28"></span></p><p class="c2"><span class="c6">Step 4)</span><span class="c4">&nbsp;I create a namespace in which i will launch my pods:</span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c3 c7">kubectl create namespace wsingress</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 81.99px;"><img alt="" src="images/image17.png" style="width: 602.00px; height: 81.99px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c4"></span></p><p class="c1"><span class="c7 c28 c6"></span></p><p class="c2"><span class="c6">Step 5)</span><span class="c4">&nbsp;As you already know that pods in k8s work with image registry lets so now launch our pods from it:</span></p><p class="c1"><span class="c4"></span></p><ul class="c11 lst-kix_59n2fda6yvhp-0 start"><li class="c2 c8 li-bullet-0"><span class="c4">First i create a 2 copy of my deployment called &ldquo;maild&rdquo; in the namespace &ldquo;wsingress&rdquo; with:</span></li></ul><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c7 c6 c26">kubectl create deployment maild --image=tcdocker2021/mailapp:v1 -n wsingress --replicas=2</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 606.00px; height: 90.40px;"><img alt="" src="images/image16.png" style="width: 606.00px; height: 90.40px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c4">You can now see that our pods launched successfully</span></p><p class="c2"><span class="c3 c7">kubectl get pod -n wsingress &nbsp;</span></p><p class="c1"><span class="c3 c7"></span></p><p class="c1 c16"><span class="c4"></span></p><p class="c1 c16"><span class="c4"></span></p><ul class="c11 lst-kix_mvep9sap8u2r-0 start"><li class="c2 c8 li-bullet-0"><span class="c4">Same thing i will do with the deployment &ldquo;searchd&rdquo; with will launch 3 copies of pods in the same namespace of deploy maild:</span></li></ul><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c7 c6 c26">kubectl create deployment maild --image=tcdocker2021/mailapp:v1 -n wsingress --replicas=2</span></p><p class="c1"><span class="c4"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 158.67px;"><img alt="" src="images/image1.png" style="width: 601.70px; height: 158.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c7 c14"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c6">Step 6)</span><span class="c4">&nbsp;Now as we have launched our deplyments we will expose the both to make it accessible from outside world: </span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c3">kubectl expose deployment maild --port=80 --type=NodePort -n wsingress</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 64.72px;"><img alt="" src="images/image4.png" style="width: 602.00px; height: 64.72px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c3 c7">kubectl expose deployment searchd --port=80 --type=NodePort -n wsingress</span></p><p class="c1"><span class="c7 c30 c31"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 45.50px;"><img alt="" src="images/image2.png" style="width: 602.00px; height: 45.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c18 c7"></span></p><p class="c2"><span class="c18 c7">&nbsp;</span></p><p class="c2"><span class="c4">Now you can check that the service of our deployment is exposed successfully</span></p><p class="c1"><span class="c18 c7"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 72.00px;"><img alt="" src="images/image8.png" style="width: 601.70px; height: 72.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c7 c18"></span></p><p class="c1"><span class="c18 c7"></span></p><p class="c2"><span class="c4">By cURLing &nbsp;our cluster ip we can verify that we can access our deployment.</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 72.00px;"><img alt="" src="images/image13.png" style="width: 601.70px; height: 72.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c18 c7"></span></p><p class="c1"><span class="c18 c7"></span></p><p class="c1"><span class="c18 c7"></span></p><p class="c2"><span class="c6">Step 7) </span><span class="c4">Till now our goal is not yet achieved, we the ingress set rules isn&rsquo;t applied to our ingress controller which will manage the loads for the two deployments we have launched .</span></p><p class="c1"><span class="c4"></span></p><ul class="c11 lst-kix_ejerxy28cfzu-0 start"><li class="c2 c8 li-bullet-0"><span class="c4">kubectl get ingress -n wsingress: =&gt; shows we haven&#39;t any ingress rule for our deployments</span></li></ul><p class="c1"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 56.09px;"><img alt="" src="images/image15.png" style="width: 602.00px; height: 56.09px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><ul class="c11 lst-kix_fbwrohojxdnd-0 start"><li class="c2 c8 li-bullet-0"><span class="c4">Set up ingress conf file:</span></li></ul><p class="c1"><span class="c0"></span></p><p class="c1 c16"><span class="c0"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 329.33px;"><img alt="" src="images/image12.png" style="width: 601.70px; height: 329.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><sup><a href="#cmnt2" id="cmnt_ref2">[b]</a></sup></p><p class="c2"><span class="c22 c9"><a class="c13" href="https://www.google.com/url?q=https://kubernetes.io/docs/concepts/services-networking/ingress/&amp;sa=D&amp;source=editors&amp;ust=1614864273539000&amp;usg=AOvVaw3mXAKZdQP7kyYGiPmeTzuX">Resource for better understanding of ingress_conf_file</a></span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c6">Note: </span><span class="c4">while configuring the ingress file don&#39;t forget to map in local machine hosts file the &quot;ip of your cluster &nbsp;with a valid domain name&quot; according to kubernetes rules.</span></p><p class="c1"><span class="c4"></span></p><p class="c2"><span class="c15">In my case it is : </span><span class="c9">&nbsp;ip_address: www.my-cluster-ip.com</span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><ul class="c11 lst-kix_ku7us2u66bii-0 start"><li class="c2 c8 li-bullet-0"><span class="c4">Create the setup yaml &nbsp;file of our ingress rule:</span></li></ul><p class="c2"><span class="c0">&nbsp;</span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 34.67px;"><img alt="" src="images/image14.png" style="width: 601.70px; height: 34.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><ul class="c11 lst-kix_i0fon0f6du5z-0 start"><li class="c2 c8 li-bullet-0"><span class="c4">Verify the service started successfully:</span></li></ul><p class="c1 c16"><span class="c4"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 60.00px;"><img alt="" src="images/image5.png" style="width: 601.70px; height: 60.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><ul class="c11 lst-kix_xixxogiq9tpr-0 start"><li class="c2 c8 li-bullet-0"><span class="c4">Now you can verify that we have successfully set our ingress rule:</span></li></ul><p class="c1"><span class="c4"></span></p><p class="c2"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 58.67px;"><img alt="" src="images/image6.png" style="width: 601.70px; height: 58.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c29">CONCLUSION </span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c4">Congrats we made it &hellip;. Now as the ingress rule file is in place so in the path of our domain url we can balance between any path available in our ingress conf file. This scenario is like the same used by big companies managing many requests coming to load balancers to satisfy users&rsquo; requests.</span></p><p class="c2"><span class="c4">&nbsp; &nbsp;</span></p><div class="c12"><p class="c10"><a href="#cmnt_ref1" id="cmnt1">[a]</a><span class="c0">You can see the ingress controller pod launched successfully this means now we can start deploy our rules for ingress..</span></p></div><div class="c12"><p class="c10"><a href="#cmnt_ref2" id="cmnt2">[b]</a><span class="c0">Note: while configure ingress file don&#39;t forget to map in local machine hosts file the &quot;ip of your cluster&nbsp; with a valid domain name&quot; according to kubernetes rules.</span></p><p class="c10 c24"><span class="c0"></span></p><p class="c10"><span class="c0">In my case it is:&nbsp; ip_address: www.my-cluster-ip.com</span></p></div></body></html>